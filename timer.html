<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Time Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
            line-height: 1.6;
        }

        .main-wrapper {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 0.8s ease-out;
        }

        h1 {
            color: white;
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            letter-spacing: -0.5px;
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            font-weight: 400;
        }

        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: fadeInUp 0.8s ease-out;
        }

        .description {
            color: #64748b;
            font-size: 0.95rem;
            margin-bottom: 30px;
            padding: 16px;
            background: #f8fafc;
            border-left: 4px solid #667eea;
            border-radius: 8px;
        }

        #time-pairs {
            margin-bottom: 30px;
        }

        .time-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding: 24px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            transition: all 0.3s ease;
            animation: slideIn 0.5s ease-out;
        }

        .time-row:hover {
            border-color: #667eea;
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.15);
            transform: translateY(-2px);
        }

        .time-inputs-wrapper {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            flex: 1;
        }

        .time-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .time-input-group label {
            font-weight: 600;
            font-size: 0.85rem;
            color: #475569;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .time-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        input[type="number"], select {
            padding: 10px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
            background: white;
        }

        input[type="number"]:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        input[type="number"] {
            width: 65px;
            text-align: center;
            font-weight: 600;
        }

        select {
            width: 75px;
            font-weight: 500;
            cursor: pointer;
        }

        .colon {
            font-weight: 700;
            font-size: 1.2rem;
            color: #64748b;
        }

        button {
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            letter-spacing: 0.3px;
            text-transform: uppercase;
            font-size: 0.85rem;
        }

        .remove-btn {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 10px 20px;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .remove-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(239, 68, 68, 0.4);
        }

        .remove-btn:active {
            transform: translateY(0);
        }

        .action-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin: 30px 0;
        }

        #add-pair {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 14px 32px;
            font-size: 1rem;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        #add-pair:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        #calculate {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 14px 40px;
            font-size: 1rem;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        #calculate:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }

        #total {
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            margin-top: 30px;
            padding: 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
            animation: pulse 0.5s ease-out;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            color: white;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 20px 10px;
            }

            h1 {
                font-size: 2rem;
            }

            .container {
                padding: 24px;
            }

            .time-row {
                flex-direction: column;
                align-items: stretch;
                gap: 16px;
            }

            .time-inputs-wrapper {
                flex-direction: column;
                gap: 16px;
            }

            .action-buttons {
                flex-direction: column;
            }

            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="main-wrapper">
        <header>
            <h1>‚è±Ô∏è Time Calculator</h1>
            <p class="subtitle">Track Your Work Hours with Precision</p>
        </header>

        <div class="container">
            <div class="description">
                <strong>üìå How to use:</strong> Add your clock-in and clock-out time pairs below. Enter hours (1-12) and minutes (0-59), then select AM/PM. Click "Calculate" to get your total working hours.
            </div>

            <div id="time-pairs">
                <!-- Dynamic rows will be added here -->
            </div>

            <div class="action-buttons">
                <button id="add-pair">‚ûï Add Time Pair</button>
                <button id="calculate">üßÆ Calculate Total</button>
            </div>

            <div id="total"></div>
        </div>

        <footer>
            <p>Built with ‚ù§Ô∏è for efficient time tracking</p>
        </footer>
    </div>

    <script>
        let pairCounter = 0;

        function addTimePair() {
            pairCounter++;
            const container = document.getElementById('time-pairs');
            const row = document.createElement('div');
            row.className = 'time-row';
            row.id = `pair-${pairCounter}`;
            row.innerHTML = `
                <div class="time-inputs-wrapper">
                    <div class="time-input-group">
                        <label>üïê Clock In</label>
                        <div class="time-controls">
                            <input type="number" min="1" max="12" value="8" id="in-hour-${pairCounter}">
                            <span class="colon">:</span>
                            <input type="number" min="0" max="59" value="44" id="in-min-${pairCounter}">
                            <select id="in-ampm-${pairCounter}">
                                <option value="AM">AM</option>
                                <option value="PM">PM</option>
                            </select>
                        </div>
                    </div>
                    <div class="time-input-group">
                        <label>üïê Clock Out</label>
                        <div class="time-controls">
                            <input type="number" min="1" max="12" value="10" id="out-hour-${pairCounter}">
                            <span class="colon">:</span>
                            <input type="number" min="0" max="59" value="07" id="out-min-${pairCounter}">
                            <select id="out-ampm-${pairCounter}">
                                <option value="AM">AM</option>
                                <option value="PM">PM</option>
                            </select>
                        </div>
                    </div>
                </div>
                <button class="remove-btn" onclick="removePair(${pairCounter})">‚úï Remove</button>
            `;
            container.appendChild(row);
            saveToLocalStorage();
        }

        function removePair(id) {
            const row = document.getElementById(`pair-${id}`);
            if (row) {
                row.remove();
                saveToLocalStorage();
            }
        }

        function calculateTotal() {
            let totalSeconds = 0;
            const pairs = document.querySelectorAll('.time-row');

            pairs.forEach((row) => {
                // Extract the actual pair ID from the row's ID attribute
                const pairId = row.id.replace('pair-', '');
                
                const inHourEl = document.getElementById(`in-hour-${pairId}`);
                const inMinEl = document.getElementById(`in-min-${pairId}`);
                const inAmpmEl = document.getElementById(`in-ampm-${pairId}`);
                const outHourEl = document.getElementById(`out-hour-${pairId}`);
                const outMinEl = document.getElementById(`out-min-${pairId}`);
                const outAmpmEl = document.getElementById(`out-ampm-${pairId}`);
                
                // Check if all elements exist before proceeding
                if (!inHourEl || !inMinEl || !inAmpmEl || !outHourEl || !outMinEl || !outAmpmEl) {
                    return;
                }
                
                const inHour = parseInt(inHourEl.value);
                const inMin = parseInt(inMinEl.value);
                const inAmpm = inAmpmEl.value;

                const outHour = parseInt(outHourEl.value);
                const outMin = parseInt(outMinEl.value);
                const outAmpm = outAmpmEl.value;

                // Convert to 24-hour for calculation
                let inTime = new Date();
                inTime.setHours(inAmpm === 'PM' && inHour !== 12 ? inHour + 12 : (inHour === 12 && inAmpm === 'AM' ? 0 : inHour));
                inTime.setMinutes(inMin);
                inTime.setSeconds(0);

                let outTime = new Date();
                outTime.setHours(outAmpm === 'PM' && outHour !== 12 ? outHour + 12 : (outHour === 12 && outAmpm === 'AM' ? 0 : outHour));
                outTime.setMinutes(outMin);
                outTime.setSeconds(0);

                if (outTime <= inTime) {
                    outTime.setDate(outTime.getDate() + 1); // Assume next day if out <= in
                }

                totalSeconds += (outTime - inTime) / 1000;
            });

            const totalHours = Math.floor(totalSeconds / 3600);
            const totalMinutes = Math.floor((totalSeconds % 3600) / 60);
            document.getElementById('total').innerHTML = `
                <div style="font-size: 1.2rem; margin-bottom: 8px;">üìä Total Working Time</div>
                <div style="font-size: 2rem;">${totalHours} hours ${totalMinutes} minutes</div>
                <div style="font-size: 0.9rem; margin-top: 8px; opacity: 0.9;">(${(totalSeconds / 3600).toFixed(2)} hours)</div>
            `;
            saveToLocalStorage();
        }

        // Save current state to localStorage
        function saveToLocalStorage() {
            const pairs = [];
            const rows = document.querySelectorAll('.time-row');
            
            rows.forEach((row) => {
                const pairId = row.id.replace('pair-', '');
                const inHour = document.getElementById(`in-hour-${pairId}`)?.value;
                const inMin = document.getElementById(`in-min-${pairId}`)?.value;
                const inAmpm = document.getElementById(`in-ampm-${pairId}`)?.value;
                const outHour = document.getElementById(`out-hour-${pairId}`)?.value;
                const outMin = document.getElementById(`out-min-${pairId}`)?.value;
                const outAmpm = document.getElementById(`out-ampm-${pairId}`)?.value;
                
                if (inHour && inMin && inAmpm && outHour && outMin && outAmpm) {
                    pairs.push({
                        inH: parseInt(inHour),
                        inM: parseInt(inMin),
                        inA: inAmpm,
                        outH: parseInt(outHour),
                        outM: parseInt(outMin),
                        outA: outAmpm
                    });
                }
            });
            
            localStorage.setItem('timePairs', JSON.stringify(pairs));
            localStorage.setItem('pairCounter', pairCounter);
        }

        // Load state from localStorage
        function loadFromLocalStorage() {
            const saved = localStorage.getItem('timePairs');
            const savedCounter = localStorage.getItem('pairCounter');
            
            if (savedCounter) {
                pairCounter = parseInt(savedCounter);
            }
            
            if (saved) {
                try {
                    return JSON.parse(saved);
                } catch (e) {
                    console.error('Failed to parse saved data', e);
                    return null;
                }
            }
            return null;
        }

        // Add event listeners to inputs for auto-save
        function attachAutoSaveListeners() {
            document.getElementById('time-pairs').addEventListener('change', saveToLocalStorage);
            document.getElementById('time-pairs').addEventListener('input', saveToLocalStorage);
        }

        // Pre-populate with saved or default pairs
        document.addEventListener('DOMContentLoaded', function() {
            // Try to load from localStorage first
            let pairsToLoad = loadFromLocalStorage();
            
            // If no saved data, use default pairs
            if (!pairsToLoad || pairsToLoad.length === 0) {
                pairsToLoad = [
                    {inH: 8, inM: 44, inA: 'AM', outH: 10, outM: 7, outA: 'AM'},
                    {inH: 10, inM: 10, inA: 'AM', outH: 11, outM: 58, outA: 'AM'},
                    {inH: 1, inM: 26, inA: 'PM', outH: 1, outM: 28, outA: 'PM'},
                    {inH: 1, inM: 28, inA: 'PM', outH: 2, outM: 35, outA: 'PM'},
                    {inH: 2, inM: 37, inA: 'PM', outH: 3, outM: 41, outA: 'PM'},
                    {inH: 3, inM: 44, inA: 'PM', outH: 4, outM: 23, outA: 'PM'},
                    {inH: 4, inM: 25, inA: 'PM', outH: 6, outM: 0, outA: 'PM'}
                ];
            }

            pairsToLoad.forEach((pair, index) => {
                pairCounter++;
                const container = document.getElementById('time-pairs');
                const row = document.createElement('div');
                row.className = 'time-row';
                row.id = `pair-${pairCounter}`;
                row.innerHTML = `
                    <div class="time-inputs-wrapper">
                        <div class="time-input-group">
                            <label>üïê Clock In</label>
                            <div class="time-controls">
                                <input type="number" min="1" max="12" value="${pair.inH}" id="in-hour-${pairCounter}">
                                <span class="colon">:</span>
                                <input type="number" min="0" max="59" value="${pair.inM.toString().padStart(2, '0')}" id="in-min-${pairCounter}">
                                <select id="in-ampm-${pairCounter}">
                                    <option value="${pair.inA}" selected>${pair.inA}</option>
                                    <option value="${pair.inA === 'AM' ? 'PM' : 'AM'}">${pair.inA === 'AM' ? 'PM' : 'AM'}</option>
                                </select>
                            </div>
                        </div>
                        <div class="time-input-group">
                            <label>üïê Clock Out</label>
                            <div class="time-controls">
                                <input type="number" min="1" max="12" value="${pair.outH}" id="out-hour-${pairCounter}">
                                <span class="colon">:</span>
                                <input type="number" min="0" max="59" value="${pair.outM.toString().padStart(2, '0')}" id="out-min-${pairCounter}">
                                <select id="out-ampm-${pairCounter}">
                                    <option value="${pair.outA}" selected>${pair.outA}</option>
                                    <option value="${pair.outA === 'AM' ? 'PM' : 'AM'}">${pair.outA === 'AM' ? 'PM' : 'AM'}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <button class="remove-btn" onclick="removePair(${pairCounter})">‚úï Remove</button>
                `;
                container.appendChild(row);
            });
            
            // Attach auto-save listeners after loading data
            attachAutoSaveListeners();
        });

        document.getElementById('add-pair').addEventListener('click', addTimePair);
        document.getElementById('calculate').addEventListener('click', calculateTotal);
    </script>
</body>
</html>